import{_ as g,a as U,p as y,h as b,T as O,d as Q}from"./preact-0e59a8f0.js";import"./dayjs-18a24b6e.js";import{_ as w,a as z}from"./tslib-8b218df4.js";import{i as X}from"./resize-observer-polyfill-0f9f8adb.js";var Y=function(r){return function(t,e){var i=g(!1);r(function(){return function(){i.current=!1}},[]),r(function(){if(!i.current)i.current=!0;else return t()},e)}},L=function(r){return typeof r=="function"},S=function(r){return typeof r=="number"},Z=!1;const R=Z;function N(r){R&&(L(r)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof r)));var t=g(r);t.current=U(function(){return r},[r]);var e=g();return e.current||(e.current=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t.current.apply(this,i)}),e.current}const rr=Y(y);function A(r,t){if(r===t)return!0;for(var e=0;e<r.length;e++)if(!Object.is(r[e],t[e]))return!1;return!0}function $(r){var t=g(r);return t.current=r,t}var er=function(r){R&&(L(r)||console.error("useUnmount expected parameter is a function, got ".concat(typeof r)));var t=$(r);y(function(){return function(){t.current()}},[])};const B=er;var tr=!!(typeof window<"u"&&window.document&&window.document.createElement);const D=tr;var nr=function(r){R&&(L(r)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof r,'".'))),y(function(){r==null||r()},[])};const Tr=nr;function p(r,t){if(D){if(!r)return t;var e;return L(r)?e=r():"current"in r?e=r.current:e=r,e}}var ur=function(r){var t=function(e,i,n){var o=g(!1),f=g([]),a=g([]),u=g();r(function(){var l,E=Array.isArray(n)?n:[n],T=E.map(function(W){return p(W)});if(!o.current){o.current=!0,f.current=T,a.current=i,u.current=e();return}(T.length!==f.current.length||!A(T,f.current)||!A(i,a.current))&&((l=u.current)===null||l===void 0||l.call(u),f.current=T,a.current=i,u.current=e())}),B(function(){var l;(l=u.current)===null||l===void 0||l.call(u),o.current=!1})};return t};const I=ur;var ar=I(y);const V=ar;function cr(r,t,e){e===void 0&&(e={});var i=$(t);V(function(){var n=p(e.target,window);if(n!=null&&n.addEventListener){var o=function(f){return i.current(f)};return n.addEventListener(r,o,{capture:e.capture,once:e.once,passive:e.passive}),function(){n.removeEventListener(r,o,{capture:e.capture})}}},[r,e.capture,e.once,e.passive],e.target)}function ir(r){var t=g(0),e=w(b(r),2),i=e[0],n=e[1],o=O(function(f){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){n(f)})},[]);return B(function(){cancelAnimationFrame(t.current)}),[i,o]}var or=function(r){var t=w(b(r),2),e=t[0],i=t[1],n=O(function(o){i(function(f){var a=L(o)?o(f):o;return a?z(z({},f),a):f})},[]);return[e,n]};const wr=or;var fr=I(Q);const vr=fr;var sr=D?vr:V;const lr=sr;function dr(r){var t=w(ir(function(){var n=p(r);return n?{width:n.clientWidth,height:n.clientHeight}:void 0}),2),e=t[0],i=t[1];return lr(function(){var n=p(r);if(n){var o=new X(function(f){f.forEach(function(a){var u=a.target,l=u.clientWidth,E=u.clientHeight;i({width:l,height:E})})});return o.observe(n),function(){o.disconnect()}}},[],r),e}var hr=function(r,t){var e=t.containerTarget,i=t.wrapperTarget,n=t.itemHeight,o=t.overscan,f=o===void 0?5:o,a=$(n),u=dr(e),l=g(!1),E=w(b([]),2),T=E[0],W=E[1],F=w(b({}),2),_=F[0],j=F[1],k=function(c,v){if(S(a.current))return Math.ceil(c/a.current);for(var d=0,s=0,h=v;h<r.length;h++){var m=a.current(h,r[h]);if(d+=m,s=h,d>=c)break}return s-v},q=function(c){if(S(a.current))return Math.floor(c/a.current)+1;for(var v=0,d=0,s=0;s<r.length;s++){var h=a.current(s,r[s]);if(v+=h,v>=c){d=s;break}}return d+1},x=function(c){if(S(a.current)){var v=c*a.current;return v}var d=r.slice(0,c).reduce(function(s,h,m){return s+a.current(m,r[m])},0);return d},C=U(function(){return S(a.current)?r.length*a.current:r.reduce(function(c,v,d){return c+a.current(d,r[d])},0)},[r]),M=function(){var c=p(e);if(c){var v=c.scrollTop,d=c.clientHeight,s=q(v),h=k(d,s),m=Math.max(0,s-f),J=Math.min(r.length,s+h+f),H=x(m);j({height:C-H+"px",marginTop:H+"px"}),W(r.slice(m,J).map(function(K,P){return{data:K,index:P+m}}))}};rr(function(){var c=p(i);c&&Object.keys(_).forEach(function(v){return c.style[v]=_[v]})},[_]),y(function(){!(u!=null&&u.width)||!(u!=null&&u.height)||M()},[u==null?void 0:u.width,u==null?void 0:u.height,r]),cr("scroll",function(c){if(l.current){l.current=!1;return}c.preventDefault(),M()},{target:e});var G=function(c){var v=p(e);v&&(l.current=!0,v.scrollTop=x(c),M())};return[T,N(G)]};const yr=hr;export{wr as a,Tr as b,yr as u};
