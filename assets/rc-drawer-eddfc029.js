import{g as H,e as u,c as ce,b as me}from"./@babel-38a01a7f.js";import{P as Re}from"./@rc-component-f5a93834.js";import{e as Pe,b as Ee,C as Le,K as se,a as ye}from"./rc-util-010eb662.js";import{F as be,q as ge,y as l,g as _e,N as Ue,_ as T,c as Fe,p as ue,h as de,a as Me}from"./preact-0e59a8f0.js";import{c as z}from"./classnames-e9f2203f.js";import{C as Ce}from"./rc-motion-8562187a.js";var he=be(null),Ne=be({}),Ae=function(n){var v=n.prefixCls,h=n.className,f=n.style,m=n.children,s=n.containerRef,c=n.id,d=n.onMouseEnter,R=n.onMouseOver,y=n.onMouseLeave,P=n.onClick,g=n.onKeyDown,E=n.onKeyUp,t={onMouseEnter:d,onMouseOver:R,onMouseLeave:y,onClick:P,onKeyDown:g,onKeyUp:E},M=ge(Ne),N=M.panel,K=Pe(N,s);return l(_e,null,l("div",H({id:c,className:z("".concat(v,"-content"),h),style:u({},f),"aria-modal":"true",role:"dialog",ref:K},t),m))};function ke(e){return typeof e=="string"&&String(Number(e))===e?(Ee(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var we={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Ie(e,n){var v,h,f,m,s=e.prefixCls,c=e.open,d=e.placement,R=e.inline,y=e.push,P=e.forceRender,g=e.autoFocus,E=e.keyboard,t=e.classNames,M=e.rootClassName,N=e.rootStyle,K=e.zIndex,W=e.className,p=e.id,L=e.style,_=e.motion,q=e.width,G=e.height,J=e.children,Q=e.contentWrapperStyle,Z=e.mask,ee=e.maskClosable,B=e.maskMotion,ne=e.maskClassName,V=e.maskStyle,k=e.afterOpenChange,U=e.onClose,ae=e.onMouseEnter,X=e.onMouseOver,oe=e.onMouseLeave,te=e.onClick,C=e.onKeyDown,Y=e.onKeyUp,r=e.styles,F=T(),A=T(),I=T();Fe(n,function(){return F.current});var re=function(i){var x=i.keyCode,O=i.shiftKey;switch(x){case se.TAB:{if(x===se.TAB){if(!O&&document.activeElement===I.current){var ie;(ie=A.current)===null||ie===void 0||ie.focus({preventScroll:!0})}else if(O&&document.activeElement===A.current){var le;(le=I.current)===null||le===void 0||le.focus({preventScroll:!0})}}break}case se.ESC:{U&&E&&(i.stopPropagation(),U(i));break}}};ue(function(){if(c&&g){var a;(a=F.current)===null||a===void 0||a.focus({preventScroll:!0})}},[c]);var ve=de(!1),S=ce(ve,2),$=S[0],D=S[1],o=ge(he),j;y===!1?j={distance:0}:y===!0?j={}:j=y||{};var w=(v=(h=(f=j)===null||f===void 0?void 0:f.distance)!==null&&h!==void 0?h:o==null?void 0:o.pushDistance)!==null&&v!==void 0?v:180,Ke=Me(function(){return{pushDistance:w,push:function(){D(!0)},pull:function(){D(!1)}}},[w]);ue(function(){if(c){var a;o==null||(a=o.push)===null||a===void 0||a.call(o)}else{var i;o==null||(i=o.pull)===null||i===void 0||i.call(o)}},[c]),ue(function(){return function(){var a;o==null||(a=o.pull)===null||a===void 0||a.call(o)}},[]);var Se=Z&&l(Ce,H({key:"mask"},B,{visible:c}),function(a,i){var x=a.className,O=a.style;return l("div",{className:z("".concat(s,"-mask"),x,t==null?void 0:t.mask,ne),style:u(u(u({},O),V),r==null?void 0:r.mask),onClick:ee&&c?U:void 0,ref:i})}),De=typeof _=="function"?_(d):_,b={};if($&&w)switch(d){case"top":b.transform="translateY(".concat(w,"px)");break;case"bottom":b.transform="translateY(".concat(-w,"px)");break;case"left":b.transform="translateX(".concat(w,"px)");break;default:b.transform="translateX(".concat(-w,"px)");break}d==="left"||d==="right"?b.width=ke(q):b.height=ke(G);var xe={onMouseEnter:ae,onMouseOver:X,onMouseLeave:oe,onClick:te,onKeyDown:C,onKeyUp:Y},Oe=l(Ce,H({key:"panel"},De,{visible:c,forceRender:P,onVisibleChanged:function(i){k==null||k(i)},removeOnLeave:!1,leavedClassName:"".concat(s,"-content-wrapper-hidden")}),function(a,i){var x=a.className,O=a.style;return l("div",H({className:z("".concat(s,"-content-wrapper"),t==null?void 0:t.wrapper,x),style:u(u(u(u({},b),O),Q),r==null?void 0:r.wrapper)},Le(e,{data:!0})),l(Ae,H({id:p,containerRef:i,prefixCls:s,className:z(W,t==null?void 0:t.content),style:u(u({},L),r==null?void 0:r.content)},xe),J))}),fe=u({},N);return K&&(fe.zIndex=K),l(he.Provider,{value:Ke},l("div",{className:z(s,"".concat(s,"-").concat(d),M,(m={},me(m,"".concat(s,"-open"),c),me(m,"".concat(s,"-inline"),R),m)),style:fe,tabIndex:-1,ref:F,onKeyDown:re},Se,l("div",{tabIndex:0,ref:A,style:we,"aria-hidden":"true","data-sentinel":"start"}),Oe,l("div",{tabIndex:0,ref:I,style:we,"aria-hidden":"true","data-sentinel":"end"})))}var $e=Ue(Ie),Ve=function(n){var v=n.open,h=v===void 0?!1:v,f=n.prefixCls,m=f===void 0?"rc-drawer":f,s=n.placement,c=s===void 0?"right":s,d=n.autoFocus,R=d===void 0?!0:d,y=n.keyboard,P=y===void 0?!0:y,g=n.width,E=g===void 0?378:g,t=n.mask,M=t===void 0?!0:t,N=n.maskClosable,K=N===void 0?!0:N,W=n.getContainer,p=n.forceRender,L=n.afterOpenChange,_=n.destroyOnClose,q=n.onMouseEnter,G=n.onMouseOver,J=n.onMouseLeave,Q=n.onClick,Z=n.onKeyDown,ee=n.onKeyUp,B=n.panelRef,ne=de(!1),V=ce(ne,2),k=V[0],U=V[1],ae=de(!1),X=ce(ae,2),oe=X[0],te=X[1];ye(function(){te(!0)},[]);var C=oe?h:!1,Y=T(),r=T();ye(function(){C&&(r.current=document.activeElement)},[C]);var F=function(S){var $;if(U(S),L==null||L(S),!S&&r.current&&!(($=Y.current)!==null&&$!==void 0&&$.contains(r.current))){var D;(D=r.current)===null||D===void 0||D.focus({preventScroll:!0})}},A=Me(function(){return{panel:B}},[B]);if(!p&&!k&&!C&&_)return null;var I={onMouseEnter:q,onMouseOver:G,onMouseLeave:J,onClick:Q,onKeyDown:Z,onKeyUp:ee},re=u(u({},n),{},{open:C,prefixCls:m,placement:c,autoFocus:R,keyboard:P,width:E,mask:M,maskClosable:K,inline:W===!1,afterOpenChange:F,ref:Y},I);return l(Ne.Provider,{value:A},l(Re,{open:C||p||k,autoDestroy:!1,getContainer:W,autoLock:M&&(C||k)},l($e,re)))};export{Ve as D};
