import{c as x}from"./classnames-b6baddbd.js";import{_ as ce,s as oe,w as c,F as Ee,N as we,h as Se,b as Ne,p as be}from"./preact-23a6e7b2.js";import{e as N,b as R,g as ue,d as de,h as fe,c as le,f as Fe}from"./@babel-179c1243.js";import{A as Ie,t as Re}from"./rc-util-f8219cd0.js";function p(e){return!!(e.addonBefore||e.addonAfter)}function re(e){return!!(e.prefix||e.suffix||e.allowClear)}function se(e,n,r,d){if(r){var a=n;if(n.type==="click"){var l=e.cloneNode(!0);a=Object.create(n,{target:{value:l},currentTarget:{value:l}}),l.value="",r(a);return}if(d!==void 0){a=Object.create(n,{target:{value:e},currentTarget:{value:e}}),e.type!=="file"&&(e.value=d),r(a);return}r(a)}}function _e(e,n){if(e){e.focus(n);var r=n||{},d=r.cursor;if(d){var a=e.value.length;switch(d){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a)}}}}var Ae=function(n){var r,d,a=n.inputElement,l=n.prefixCls,_=n.prefix,b=n.suffix,M=n.addonBefore,y=n.addonAfter,F=n.className,j=n.style,q=n.disabled,H=n.readOnly,K=n.focused,L=n.triggerFocus,h=n.allowClear,A=n.value,Y=n.handleReset,W=n.hidden,u=n.classes,i=n.classNames,B=n.dataAttrs,m=n.styles,f=n.components,Z=(f==null?void 0:f.affixWrapper)||"span",J=(f==null?void 0:f.groupWrapper)||"span",ee=(f==null?void 0:f.wrapper)||"span",k=(f==null?void 0:f.groupAddon)||"span",O=ce(null),s=function(g){var w;(w=O.current)!==null&&w!==void 0&&w.contains(g.target)&&(L==null||L())},$=function(){var g;if(!h)return null;var w=!q&&!H&&A,V="".concat(l,"-clear-icon"),X=de(h)==="object"&&h!==null&&h!==void 0&&h.clearIcon?h.clearIcon:"âœ–";return c.createElement("span",{onClick:Y,onMouseDown:function(te){return te.preventDefault()},className:x(V,(g={},R(g,"".concat(V,"-hidden"),!w),R(g,"".concat(V,"-has-suffix"),!!b),g)),role:"button",tabIndex:-1},X)},z=oe(a,{value:A,hidden:W,className:x((r=a.props)===null||r===void 0?void 0:r.className,!re(n)&&!p(n)&&F)||null,style:N(N({},(d=a.props)===null||d===void 0?void 0:d.style),!re(n)&&!p(n)?j:{})});if(re(n)){var C,E="".concat(l,"-affix-wrapper"),Q=x(E,(C={},R(C,"".concat(E,"-disabled"),q),R(C,"".concat(E,"-focused"),K),R(C,"".concat(E,"-readonly"),H),R(C,"".concat(E,"-input-with-clear-btn"),b&&h&&A),C),!p(n)&&F,u==null?void 0:u.affixWrapper,i==null?void 0:i.affixWrapper),P=(b||h)&&c.createElement("span",{className:x("".concat(l,"-suffix"),i==null?void 0:i.suffix),style:m==null?void 0:m.suffix},$(),b);z=c.createElement(Z,ue({className:Q,style:N(N({},p(n)?void 0:j),m==null?void 0:m.affixWrapper),hidden:!p(n)&&W,onClick:s},B==null?void 0:B.affixWrapper,{ref:O}),_&&c.createElement("span",{className:x("".concat(l,"-prefix"),i==null?void 0:i.prefix),style:m==null?void 0:m.prefix},_),oe(a,{value:A,hidden:null}),P)}if(p(n)){var U="".concat(l,"-group"),G="".concat(U,"-addon"),T=x("".concat(l,"-wrapper"),U,u==null?void 0:u.wrapper),ne=x("".concat(l,"-group-wrapper"),F,u==null?void 0:u.group);return c.createElement(J,{className:ne,style:j,hidden:W},c.createElement(ee,{className:T},M&&c.createElement(k,{className:G},M),oe(z,{hidden:null}),y&&c.createElement(k,{className:G},y)))}return z},Be=["show"];function De(e,n){return Ee(function(){var r={};n&&(r.show=de(n)==="object"&&n.formatter?n.formatter:!!n),r=N(N({},r),e);var d=r,a=d.show,l=fe(d,Be);return N(N({},l),{},{show:!!a,showFormatter:typeof a=="function"?a:void 0,strategy:l.strategy||function(_){return _.length}})},[e,n])}var ke=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Ke=we(function(e,n){var r=e.autoComplete,d=e.onChange,a=e.onFocus,l=e.onBlur,_=e.onPressEnter,b=e.onKeyDown,M=e.prefixCls,y=M===void 0?"rc-input":M,F=e.disabled,j=e.htmlSize,q=e.className,H=e.maxLength,K=e.suffix,L=e.showCount,h=e.count,A=e.type,Y=A===void 0?"text":A,W=e.classes,u=e.classNames,i=e.styles,B=e.onCompositionStart,m=e.onCompositionEnd,f=fe(e,ke),Z=Se(!1),J=le(Z,2),ee=J[0],k=J[1],O=c.useRef(!1),s=ce(null),$=function(t){s.current&&_e(s.current,t)},z=Ie(e.defaultValue,{value:e.value}),C=le(z,2),E=C[0],Q=C[1],P=E==null?"":String(E),U=c.useState(null),G=le(U,2),T=G[0],ne=G[1],v=De(h,L),g=v.max||H,w=v.strategy(P),V=!!g&&w>g;Ne(n,function(){return{focus:$,blur:function(){var t;(t=s.current)===null||t===void 0||t.blur()},setSelectionRange:function(t,S,I){var D;(D=s.current)===null||D===void 0||D.setSelectionRange(t,S,I)},select:function(){var t;(t=s.current)===null||t===void 0||t.select()},input:s.current}}),be(function(){k(function(o){return o&&F?!1:o})},[F]);var X=function(t,S){var I=S;if(!O.current&&v.exceedFormatter&&v.max&&v.strategy(S)>v.max&&(I=v.exceedFormatter(S,{max:v.max}),S!==I)){var D,ae;ne([((D=s.current)===null||D===void 0?void 0:D.selectionStart)||0,((ae=s.current)===null||ae===void 0?void 0:ae.selectionEnd)||0])}Q(I),s.current&&se(s.current,t,d,I)};c.useEffect(function(){if(T){var o;(o=s.current)===null||o===void 0||o.setSelectionRange.apply(o,Fe(T))}},[T]);var ie=function(t){X(t,t.target.value)},te=function(t){O.current=!1,X(t,t.currentTarget.value),m==null||m(t)},ve=function(t){_&&t.key==="Enter"&&_(t),b==null||b(t)},me=function(t){k(!0),a==null||a(t)},ge=function(t){k(!1),l==null||l(t)},he=function(t){Q(""),$(),s.current&&se(s.current,t,d)},xe=V&&"".concat(y,"-out-of-range"),ye=function(){var t=Re(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return c.createElement("input",ue({autoComplete:r},t,{onChange:ie,onFocus:me,onBlur:ge,onKeyDown:ve,className:x(y,R({},"".concat(y,"-disabled"),F),u==null?void 0:u.input),style:i==null?void 0:i.input,ref:s,size:j,type:Y,onCompositionStart:function(I){O.current=!0,B==null||B(I)},onCompositionEnd:te}))},Ce=function(){var t=Number(g)>0;if(K||v.show){var S=v.showFormatter?v.showFormatter({value:P,count:w,maxLength:g}):"".concat(w).concat(t?" / ".concat(g):"");return c.createElement(c.Fragment,null,v.show&&c.createElement("span",{className:x("".concat(y,"-show-count-suffix"),R({},"".concat(y,"-show-count-has-suffix"),!!K),u==null?void 0:u.count),style:N({},i==null?void 0:i.count)},S),K)}return null};return c.createElement(Ae,ue({},f,{prefixCls:y,className:x(q,xe),inputElement:ye(),handleReset:he,value:P,focused:ee,triggerFocus:$,suffix:Ce(),disabled:F,classes:W,classNames:u,styles:i}))});export{Ae as B,Ke as I,se as r,De as u};
