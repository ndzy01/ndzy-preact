import{h as fe,o as be,p as Ne,a as Oe,_ as De,d as Ee,c as D,e as v,b as g,q as Le,g as Ze}from"./@babel-179c1243.js";import{c as en}from"./classnames-b6baddbd.js";import{c as Se,l as Pe,z as te,h as nn,s as tn,G as rn}from"./rc-util-f8219cd0.js";import{y as re,G as an,m as Ue,_ as b,T as Ve,p as $,c as on,F as un,N as sn,q as cn,f as vn,s as fn,k as dn}from"./preact-23a6e7b2.js";var ln=["children"],we=an({});function wn(n){var e=n.children,t=fe(n,ln);return re(we.Provider,{value:t},e)}var mn=function(n){be(t,n);var e=Ne(t);function t(){return Oe(this,t),e.apply(this,arguments)}return De(t,[{key:"render",value:function(){return this.props.children}}]),t}(Ue),j="none",Y="appear",Z="enter",ee="leave",_e="none",C="prepare",W="start",H="active",ye="end",Fe="prepared";function Ce(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(n)]="webkit".concat(e),t["Moz".concat(n)]="moz".concat(e),t["ms".concat(n)]="MS".concat(e),t["O".concat(n)]="o".concat(e.toLowerCase()),t}function pn(n,e){var t={animationend:Ce("Animation","AnimationEnd"),transitionend:Ce("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var En=pn(Se(),typeof window<"u"?window:{}),Ie={};if(Se()){var Sn=document.createElement("div");Ie=Sn.style}var ne={};function Ke(n){if(ne[n])return ne[n];var e=En[n];if(e)for(var t=Object.keys(e),r=t.length,i=0;i<r;i+=1){var u=t[i];if(Object.prototype.hasOwnProperty.call(e,u)&&u in Ie)return ne[n]=e[u],ne[n]}return""}var je=Ke("animationend"),$e=Ke("transitionend"),Qe=!!(je&&$e),Me=je||"animationend",Re=$e||"transitionend";function xe(n,e){if(!n)return null;if(Ee(n)==="object"){var t=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return n[t]}return"".concat(n,"-").concat(e)}const yn=function(n){var e=b(),t=b(n);t.current=n;var r=Ve(function(a){t.current(a)},[]);function i(a){a&&(a.removeEventListener(Re,r),a.removeEventListener(Me,r))}function u(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(Re,r),a.addEventListener(Me,r),e.current=a)}return $(function(){return function(){i(e.current)}},[]),[u,i]};var ze=Se()?on:$;const hn=function(){var n=b(null);function e(){Pe.cancel(n.current)}function t(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var u=Pe(function(){i<=1?r({isCanceled:function(){return u!==n.current}}):t(r,i-1)});n.current=u}return $(function(){return function(){e()}},[]),[t,e]};var An=[C,W,H,ye],gn=[C,Fe],We=!1,Tn=!0;function He(n){return n===H||n===ye}const kn=function(n,e,t){var r=te(_e),i=D(r,2),u=i[0],a=i[1],l=hn(),p=D(l,2),o=p[0],s=p[1];function c(){a(C,!0)}var f=e?gn:An;return ze(function(){if(u!==_e&&u!==ye){var d=f.indexOf(u),E=f[d+1],L=t(u);L===We?a(E,!0):E&&o(function(M){function T(){M.isCanceled()||a(E,!0)}L===!0?T():Promise.resolve(L).then(T)})}},[n,u]),$(function(){return function(){s()}},[]),[c,u]};function Ln(n,e,t,r){var i=r.motionEnter,u=i===void 0?!0:i,a=r.motionAppear,l=a===void 0?!0:a,p=r.motionLeave,o=p===void 0?!0:p,s=r.motionDeadline,c=r.motionLeaveImmediately,f=r.onAppearPrepare,d=r.onEnterPrepare,E=r.onLeavePrepare,L=r.onAppearStart,M=r.onEnterStart,T=r.onLeaveStart,U=r.onAppearActive,V=r.onEnterActive,O=r.onLeaveActive,w=r.onAppearEnd,P=r.onEnterEnd,k=r.onLeaveEnd,N=r.onVisibleChanged,ae=te(),Q=D(ae,2),_=Q[0],F=Q[1],h=te(j),I=D(h,2),m=I[0],R=I[1],B=te(null),J=D(B,2),ie=J[0],z=J[1],oe=b(!1),ue=b(null);function X(){return t()}var he=b(!1);function Ae(){R(j,!0),z(null,!0)}function ge(A){var S=X();if(!(A&&!A.deadline&&A.target!==S)){var y=he.current,x;m===Y&&y?x=w==null?void 0:w(S,A):m===Z&&y?x=P==null?void 0:P(S,A):m===ee&&y&&(x=k==null?void 0:k(S,A)),m!==j&&y&&x!==!1&&Ae()}}var qe=yn(ge),Ge=D(qe,1),Be=Ge[0],Te=function(S){var y,x,G;switch(S){case Y:return y={},g(y,C,f),g(y,W,L),g(y,H,U),y;case Z:return x={},g(x,C,d),g(x,W,M),g(x,H,V),x;case ee:return G={},g(G,C,E),g(G,W,T),g(G,H,O),G;default:return{}}},q=un(function(){return Te(m)},[m]),Je=kn(m,!n,function(A){if(A===C){var S=q[C];return S?S(X()):We}if(K in q){var y;z(((y=q[K])===null||y===void 0?void 0:y.call(q,X(),null))||null)}return K===H&&(Be(X()),s>0&&(clearTimeout(ue.current),ue.current=setTimeout(function(){ge({deadline:!0})},s))),K===Fe&&Ae(),Tn}),ke=D(Je,2),Xe=ke[0],K=ke[1],Ye=He(K);he.current=Ye,ze(function(){F(e);var A=oe.current;oe.current=!0;var S;!A&&e&&l&&(S=Y),A&&e&&u&&(S=Z),(A&&!e&&o||!A&&c&&!e&&o)&&(S=ee);var y=Te(S);S&&(n||y[C])?(R(S),Xe()):R(j)},[e]),$(function(){(m===Y&&!l||m===Z&&!u||m===ee&&!o)&&R(j)},[l,u,o]),$(function(){return function(){oe.current=!1,clearTimeout(ue.current)}},[]);var se=b(!1);$(function(){_&&(se.current=!0),_!==void 0&&m===j&&((se.current||_)&&(N==null||N(_)),se.current=!0)},[_,m]);var ce=ie;return q[C]&&K===W&&(ce=v({transition:"none"},ce)),[m,K,ce,_??e]}function Pn(n){var e=n;Ee(n)==="object"&&(e=n.transitionSupport);function t(i,u){return!!(i.motionName&&e&&u!==!1)}var r=sn(function(i,u){var a=i.visible,l=a===void 0?!0:a,p=i.removeOnLeave,o=p===void 0?!0:p,s=i.forceRender,c=i.children,f=i.motionName,d=i.leavedClassName,E=i.eventProps,L=cn(we),M=L.motion,T=t(i,M),U=b(),V=b();function O(){try{return U.current instanceof HTMLElement?U.current:rn(V.current)}catch{return null}}var w=Ln(T,l,O,i),P=D(w,4),k=P[0],N=P[1],ae=P[2],Q=P[3],_=b(Q);Q&&(_.current=!0);var F=Ve(function(z){U.current=z,nn(u,z)},[u]),h,I=v(v({},E),{},{visible:l});if(!c)h=null;else if(k===j)Q?h=c(v({},I),F):!o&&_.current&&d?h=c(v(v({},I),{},{className:d}),F):s||!o&&!d?h=c(v(v({},I),{},{style:{display:"none"}}),F):h=null;else{var m,R;N===C?R="prepare":He(N)?R="active":N===W&&(R="start");var B=xe(f,"".concat(k,"-").concat(R));h=c(v(v({},I),{},{className:en(xe(f,k),(m={},g(m,B,B&&R),g(m,f,typeof f=="string"),m)),style:ae}),F)}if(vn(h)&&tn(h)){var J=h,ie=J.ref;ie||(h=fn(h,{ref:F}))}return re(mn,{ref:V},h)});return r.displayName="CSSMotion",r}const _n=Pn(Qe);var de="add",le="keep",me="remove",ve="removed";function Cn(n){var e;return n&&Ee(n)==="object"&&"key"in n?e=n:e={key:n},v(v({},e),{},{key:String(e.key)})}function pe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(Cn)}function Mn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],r=0,i=e.length,u=pe(n),a=pe(e);u.forEach(function(o){for(var s=!1,c=r;c<i;c+=1){var f=a[c];if(f.key===o.key){r<c&&(t=t.concat(a.slice(r,c).map(function(d){return v(v({},d),{},{status:de})})),r=c),t.push(v(v({},f),{},{status:le})),r+=1,s=!0;break}}s||t.push(v(v({},o),{},{status:me}))}),r<i&&(t=t.concat(a.slice(r).map(function(o){return v(v({},o),{},{status:de})})));var l={};t.forEach(function(o){var s=o.key;l[s]=(l[s]||0)+1});var p=Object.keys(l).filter(function(o){return l[o]>1});return p.forEach(function(o){t=t.filter(function(s){var c=s.key,f=s.status;return c!==o||f!==me}),t.forEach(function(s){s.key===o&&(s.status=le)})}),t}var Rn=["component","children","onVisibleChanged","onAllRemoved"],xn=["status"],bn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Nn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_n,t=function(r){be(u,r);var i=Ne(u);function u(){var a;Oe(this,u);for(var l=arguments.length,p=new Array(l),o=0;o<l;o++)p[o]=arguments[o];return a=i.call.apply(i,[this].concat(p)),g(Le(a),"state",{keyEntities:[]}),g(Le(a),"removeKey",function(s){var c=a.state.keyEntities,f=c.map(function(d){return d.key!==s?d:v(v({},d),{},{status:ve})});return a.setState({keyEntities:f}),f.filter(function(d){var E=d.status;return E!==ve}).length}),a}return De(u,[{key:"render",value:function(){var l=this,p=this.state.keyEntities,o=this.props,s=o.component,c=o.children,f=o.onVisibleChanged,d=o.onAllRemoved,E=fe(o,Rn),L=s||dn,M={};return bn.forEach(function(T){M[T]=E[T],delete E[T]}),delete E.keys,re(L,E,p.map(function(T,U){var V=T.status,O=fe(T,xn),w=V===de||V===le;return re(e,Ze({},M,{key:O.key,visible:w,eventProps:O,onVisibleChanged:function(k){if(f==null||f(k,{key:O.key}),!k){var N=l.removeKey(O.key);N===0&&d&&d()}}}),function(P,k){return c(v(v({},P),{},{index:U}),k)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,p){var o=l.keys,s=p.keyEntities,c=pe(o),f=Mn(s,c);return{keyEntities:f.filter(function(d){var E=s.find(function(L){var M=L.key;return d.key===M});return!(E&&E.status===ve&&d.status===me)})}}}]),u}(Ue);return g(t,"defaultProps",{component:"div"}),t}const Fn=Nn(Qe);export{_n as C,wn as M,Fn as a};
