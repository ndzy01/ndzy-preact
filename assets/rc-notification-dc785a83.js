import{c as w,g as ie,b as re,d as _e,h as ye,e as G,f as U}from"./@babel-38a01a7f.js";import{N as Ce,h as T,p as D,y as F,w as q,q as be,_ as se,c as Me,j as Pe,g as we,a as He}from"./preact-0e59a8f0.js";import{c as X}from"./classnames-e9f2203f.js";import{a as Ie}from"./rc-motion-8562187a.js";import{K as Te}from"./rc-util-010eb662.js";var De=Ce(function(e,i){var c=e.prefixCls,u=e.style,s=e.className,l=e.duration,m=l===void 0?4.5:l,R=e.eventKey,E=e.content,A=e.closable,b=e.closeIcon,M=b===void 0?"x":b,v=e.props,y=e.onClick,f=e.onNoticeClose,L=e.times,g=e.hovering,d=T(!1),p=w(d,2),x=p[0],h=p[1],C=g||x,k=function(){f(R)},r=function(t){(t.key==="Enter"||t.code==="Enter"||t.keyCode===Te.ENTER)&&k()};D(function(){if(!C&&m>0){var n=setTimeout(function(){k()},m*1e3);return function(){clearTimeout(n)}}},[m,C,L]);var o="".concat(c,"-notice");return F("div",ie({},v,{ref:i,className:X(o,s,re({},"".concat(o,"-closable"),A)),style:u,onMouseEnter:function(t){var a;h(!0),v==null||(a=v.onMouseEnter)===null||a===void 0||a.call(v,t)},onMouseLeave:function(t){var a;h(!1),v==null||(a=v.onMouseLeave)===null||a===void 0||a.call(v,t)},onClick:y}),F("div",{className:"".concat(o,"-content")},E),A&&F("a",{tabIndex:0,className:"".concat(o,"-close"),onKeyDown:r,onClick:function(t){t.preventDefault(),t.stopPropagation(),k()}},M))}),Ne=q.createContext({}),Ve=function(i){var c=i.children,u=i.classNames;return q.createElement(Ne.Provider,{value:{classNames:u}},c)},fe=8,ve=3,de=16,Ke=function(i){var c={offset:fe,threshold:ve,gap:de};if(i&&_e(i)==="object"){var u,s,l;c.offset=(u=i.offset)!==null&&u!==void 0?u:fe,c.threshold=(s=i.threshold)!==null&&s!==void 0?s:ve,c.gap=(l=i.gap)!==null&&l!==void 0?l:de}return[!!i,c]},Fe=["className","style","classNames","styles"],We=function(i){var c,u=i.configList,s=i.placement,l=i.prefixCls,m=i.className,R=i.style,E=i.motion,A=i.onAllNoticeRemoved,b=i.onNoticeClose,M=i.stack,v=be(Ne),y=v.classNames,f=se({}),L=T(null),g=w(L,2),d=g[0],p=g[1],x=T([]),h=w(x,2),C=h[0],k=h[1],r=u.map(function(N){return{config:N,key:String(N.key)}}),o=Ke(M),n=w(o,2),t=n[0],a=n[1],S=a.offset,P=a.threshold,W=a.gap,K=t&&(C.length>0||r.length<=P),ge=typeof E=="function"?E(s):E;return D(function(){t&&C.length>1&&k(function(N){return N.filter(function(H){return r.some(function(Q){var Y=Q.key;return H===Y})})})},[C,r,t]),D(function(){var N;if(t&&f.current[(N=r[r.length-1])===null||N===void 0?void 0:N.key]){var H;p(f.current[(H=r[r.length-1])===null||H===void 0?void 0:H.key])}},[r,t]),q.createElement(Ie,ie({key:s,className:X(l,"".concat(l,"-").concat(s),y==null?void 0:y.list,m,(c={},re(c,"".concat(l,"-stack"),!!t),re(c,"".concat(l,"-stack-expanded"),K),c)),style:R,keys:r,motionAppear:!0},ge,{onAllRemoved:function(){A(s)}}),function(N,H){var Q=N.config,Y=N.className,he=N.style,ke=N.index,ce=Q,Z=ce.key,xe=ce.times,_=String(Z),j=Q,Se=j.className,Ee=j.style,z=j.classNames,B=j.styles,Ae=ye(j,Fe),$=r.findIndex(function(V){return V.key===_}),J={};if(t){var O=r.length-1-($>-1?$:ke-1),le=s==="top"||s==="bottom"?"-50%":"0";if(O>0){var ee,te,ne;J.height=K?(ee=f.current[_])===null||ee===void 0?void 0:ee.offsetHeight:d==null?void 0:d.offsetHeight;for(var ue=0,oe=0;oe<O;oe++){var ae;ue+=((ae=f.current[r[r.length-1-oe].key])===null||ae===void 0?void 0:ae.offsetHeight)+W}var Re=(K?ue:O*S)*(s.startsWith("top")?1:-1),Le=!K&&d!==null&&d!==void 0&&d.offsetWidth&&(te=f.current[_])!==null&&te!==void 0&&te.offsetWidth?((d==null?void 0:d.offsetWidth)-S*2*(O<3?O:3))/((ne=f.current[_])===null||ne===void 0?void 0:ne.offsetWidth):1;J.transform="translate3d(".concat(le,", ").concat(Re,"px, 0) scaleX(").concat(Le,")")}else J.transform="translate3d(".concat(le,", 0, 0)")}return q.createElement("div",{ref:H,className:X("".concat(l,"-notice-wrapper"),Y,z==null?void 0:z.wrapper),style:G(G(G({},he),J),B==null?void 0:B.wrapper),onMouseEnter:function(){return k(function(I){return I.includes(_)?I:[].concat(U(I),[_])})},onMouseLeave:function(){return k(function(I){return I.filter(function(pe){return pe!==_})})}},q.createElement(De,ie({},Ae,{ref:function(I){$>-1?f.current[_]=I:delete f.current[_]},prefixCls:l,classNames:z,styles:B,className:X(Se,y==null?void 0:y.notice),style:Ee,times:xe,key:Z,eventKey:Z,onNoticeClose:b,hovering:t&&C.length>0})))})},je=Ce(function(e,i){var c=e.prefixCls,u=c===void 0?"rc-notification":c,s=e.container,l=e.motion,m=e.maxCount,R=e.className,E=e.style,A=e.onAllRemoved,b=e.stack,M=e.renderNotifications,v=T([]),y=w(v,2),f=y[0],L=y[1],g=function(n){var t,a=f.find(function(S){return S.key===n});a==null||(t=a.onClose)===null||t===void 0||t.call(a),L(function(S){return S.filter(function(P){return P.key!==n})})};Me(i,function(){return{open:function(n){L(function(t){var a=U(t),S=a.findIndex(function(K){return K.key===n.key}),P=G({},n);if(S>=0){var W;P.times=(((W=t[S])===null||W===void 0?void 0:W.times)||0)+1,a[S]=P}else P.times=0,a.push(P);return m>0&&a.length>m&&(a=a.slice(-m)),a})},close:function(n){g(n)},destroy:function(){L([])}}});var d=T({}),p=w(d,2),x=p[0],h=p[1];D(function(){var o={};f.forEach(function(n){var t=n.placement,a=t===void 0?"topRight":t;a&&(o[a]=o[a]||[],o[a].push(n))}),Object.keys(x).forEach(function(n){o[n]=o[n]||[]}),h(o)},[f]);var C=function(n){h(function(t){var a=G({},t),S=a[n]||[];return S.length||delete a[n],a})},k=se(!1);if(D(function(){Object.keys(x).length>0?k.current=!0:k.current&&(A==null||A(),k.current=!1)},[x]),!s)return null;var r=Object.keys(x);return Pe(F(we,null,r.map(function(o){var n=x[o],t=F(We,{key:o,configList:n,placement:o,prefixCls:u,className:R==null?void 0:R(o),style:E==null?void 0:E(o),motion:l,onNoticeClose:g,onAllNoticeRemoved:C,stack:b});return M?M(t,{prefixCls:u,key:o}):t})),s)}),Oe=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Ge=function(){return document.body},me=0;function Ue(){for(var e={},i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return c.forEach(function(s){s&&Object.keys(s).forEach(function(l){var m=s[l];m!==void 0&&(e[l]=m)})}),e}function Xe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.getContainer,c=i===void 0?Ge:i,u=e.motion,s=e.prefixCls,l=e.maxCount,m=e.className,R=e.style,E=e.onAllRemoved,A=e.stack,b=e.renderNotifications,M=ye(e,Oe),v=T(),y=w(v,2),f=y[0],L=y[1],g=se(),d=F(je,{container:f,ref:g,prefixCls:s,motion:u,maxCount:l,className:m,style:R,onAllRemoved:E,stack:A,renderNotifications:b}),p=T([]),x=w(p,2),h=x[0],C=x[1],k=He(function(){return{open:function(o){var n=Ue(M,o);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(me),me+=1),C(function(t){return[].concat(U(t),[{type:"open",config:n}])})},close:function(o){C(function(n){return[].concat(U(n),[{type:"close",key:o}])})},destroy:function(){C(function(o){return[].concat(U(o),[{type:"destroy"}])})}}},[]);return D(function(){L(c())}),D(function(){g.current&&h.length&&(h.forEach(function(r){switch(r.type){case"open":g.current.open(r.config);break;case"close":g.current.close(r.key);break;case"destroy":g.current.destroy();break}}),C(function(r){return r.filter(function(o){return!h.includes(o)})}))},[h]),[k,d]}export{De as N,Ve as a,Xe as u};
