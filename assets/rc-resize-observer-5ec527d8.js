import{k as j,l as F,a as T,_ as q,e as x,d as G,g as K}from"./@babel-38a01a7f.js";import{_ as d,q as D,T as I,y as z,F as X,i as Y,N,f as J,c as Q,p as U,s as V}from"./preact-0e59a8f0.js";import{s as Z,e as ee,G as b,y as re}from"./rc-util-010eb662.js";import{i as ne}from"./resize-observer-polyfill-0f9f8adb.js";var _=X(null);function te(e){var t=e.children,r=e.onBatchResize,i=d(0),n=d([]),o=D(_),c=I(function(l,f,s){i.current+=1;var h=i.current;n.current.push({size:l,element:f,data:s}),Promise.resolve().then(function(){h===i.current&&(r==null||r(n.current),n.current=[])}),o==null||o(l,f,s)},[r,o]);return z(_.Provider,{value:c},t)}var u=new Map;function ie(e){e.forEach(function(t){var r,i=t.target;(r=u.get(i))===null||r===void 0||r.forEach(function(n){return n(i)})})}var P=new ne(ie);function oe(e,t){u.has(e)||(u.set(e,new Set),P.observe(e)),u.get(e).add(t)}function ae(e,t){u.has(e)&&(u.get(e).delete(t),u.get(e).size||(P.unobserve(e),u.delete(e)))}var fe=function(e){j(r,e);var t=F(r);function r(){return T(this,r),t.apply(this,arguments)}return q(r,[{key:"render",value:function(){return this.props.children}}]),r}(Y);function se(e,t){var r=e.children,i=e.disabled,n=d(null),o=d(null),c=D(_),l=typeof r=="function",f=l?r(n):r,s=d({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!l&&J(f)&&Z(f),S=h?f.ref:null,B=ee(S,n),C=function(){var v;return b(n.current)||(n.current&&G(n.current)==="object"?b((v=n.current)===null||v===void 0?void 0:v.nativeElement):null)||b(o.current)};Q(t,function(){return C()});var y=d(e);y.current=e;var w=I(function(a){var v=y.current,W=v.onResize,$=v.data,k=a.getBoundingClientRect(),p=k.width,m=k.height,R=a.offsetWidth,g=a.offsetHeight,E=Math.floor(p),H=Math.floor(m);if(s.current.width!==E||s.current.height!==H||s.current.offsetWidth!==R||s.current.offsetHeight!==g){var M={width:E,height:H,offsetWidth:R,offsetHeight:g};s.current=M;var A=R===Math.round(p)?p:R,L=g===Math.round(m)?m:g,O=x(x({},M),{},{offsetWidth:A,offsetHeight:L});c==null||c(O,a,$),W&&Promise.resolve().then(function(){W(O,a)})}},[]);return U(function(){var a=C();return a&&!i&&oe(a,w),function(){return ae(a,w)}},[n.current,i]),z(fe,{ref:o},h?V(f,{ref:B}):f)}var ue=N(se),ce="rc-observer-key";function ve(e,t){var r=e.children,i=typeof r=="function"?[r]:re(r);return i.map(function(n,o){var c=(n==null?void 0:n.key)||"".concat(ce,"-").concat(o);return z(ue,K({},e,{key:c,ref:o===0?t:void 0}),n)})}var de=N(ve);de.Collection=te;export{de as R};
