import{e as k,b as N,g as at,c as H,_ as Et,a as _t,d as ke,h as Lt}from"./@babel-38a01a7f.js";import{N as Fe,y as O,h as F,_ as p,a as Me,p as be,c as it,T as ot,s as Tt,k as Je}from"./preact-0e59a8f0.js";import{c as ze}from"./classnames-e9f2203f.js";import{R as lt}from"./rc-resize-observer-5ec527d8.js";import{l as A,G as Ht,a as ye,i as Qe}from"./rc-util-010eb662.js";import"./react-is-e5978b8b.js";var ut=Fe(function(e,u){var t=e.height,c=e.offsetY,g=e.offsetX,n=e.children,s=e.prefixCls,v=e.onInnerResize,S=e.innerProps,y=e.rtl,d=e.extra,r={},l={display:"flex",flexDirection:"column"};if(c!==void 0){var a;r={height:t,position:"relative",overflow:"hidden"},l=k(k({},l),{},(a={transform:"translateY(".concat(c,"px)")},N(a,y?"marginRight":"marginLeft",-g),N(a,"position","absolute"),N(a,"left",0),N(a,"right",0),N(a,"top",0),a))}return O("div",{style:r},O(lt,{onResize:function(h){var f=h.offsetHeight;f&&v&&v()}},O("div",at({style:l,className:ze(N({},"".concat(s,"-holder-inner"),s)),ref:u},S),n,d)))});ut.displayName="Filler";function et(e,u){var t="touches"in e?e.touches[0]:e;return t[u?"pageX":"pageY"]}var tt=Fe(function(e,u){var t,c=e.prefixCls,g=e.rtl,n=e.scrollOffset,s=e.scrollRange,v=e.onStartMove,S=e.onStopMove,y=e.onScroll,d=e.horizontal,r=e.spinSize,l=e.containerSize,a=e.style,m=e.thumbStyle,h=F(!1),f=H(h,2),M=f[0],b=f[1],D=F(null),L=H(D,2),Y=L[0],V=L[1],x=F(null),G=H(x,2),C=G[0],$=G[1],P=!g,ee=p(),w=p(),W=F(!1),te=H(W,2),re=te[0],Z=te[1],I=p(),ne=function(){clearTimeout(I.current),Z(!0),I.current=setTimeout(function(){Z(!1)},3e3)},ae=s-l||0,ue=l-r||0,ie=ae>0,B=Me(function(){if(n===0||ae===0)return 0;var T=n/ae;return T*ue},[n,ae,ue]),Ee=function(E){E.stopPropagation(),E.preventDefault()},ce=p({top:B,dragging:M,pageY:Y,startTop:C});ce.current={top:B,dragging:M,pageY:Y,startTop:C};var fe=function(E){b(!0),V(et(E,d)),$(ce.current.top),v(),E.stopPropagation(),E.preventDefault()};be(function(){var T=function(he){he.preventDefault()},E=ee.current,j=w.current;return E.addEventListener("touchstart",T),j.addEventListener("touchstart",fe),function(){E.removeEventListener("touchstart",T),j.removeEventListener("touchstart",fe)}},[]);var ve=p();ve.current=ae;var de=p();de.current=ue,be(function(){if(M){var T,E=function(he){var ge=ce.current,_e=ge.dragging,se=ge.pageY,Le=ge.startTop;if(A.cancel(T),_e){var Se=et(he,d)-se,oe=Le;!P&&d?oe-=Se:oe+=Se;var we=ve.current,le=de.current,q=le?oe/le:0,X=Math.ceil(q*we);X=Math.max(X,0),X=Math.min(X,we),T=A(function(){y(X,d)})}},j=function(){b(!1),S()};return window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",j),window.addEventListener("touchend",j),function(){window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",j),window.removeEventListener("touchend",j),A.cancel(T)}}},[M]),be(function(){ne()},[n]),it(u,function(){return{delayHidden:ne}});var U="".concat(c,"-scrollbar"),z={position:"absolute",visibility:re&&ie?null:"hidden"},K={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return d?(z.height=8,z.left=0,z.right=0,z.bottom=0,K.height="100%",K.width=r,P?K.left=B:K.right=B):(z.width=8,z.top=0,z.bottom=0,P?z.right=0:z.left=0,K.width="100%",K.height=r,K.top=B),O("div",{ref:ee,className:ze(U,(t={},N(t,"".concat(U,"-horizontal"),d),N(t,"".concat(U,"-vertical"),!d),N(t,"".concat(U,"-visible"),re),t)),style:k(k({},z),a),onMouseDown:Ee,onMouseMove:ne},O("div",{ref:w,className:ze("".concat(U,"-thumb"),N({},"".concat(U,"-thumb-moving"),M)),style:k(k({},K),m),onMouseDown:fe}))});function Dt(e){var u=e.children,t=e.setRef,c=ot(function(g){t(g)},[]);return Tt(u,{ref:c})}function Ct(e,u,t,c,g,n,s){var v=s.getKey;return e.slice(u,t+1).map(function(S,y){var d=u+y,r=n(S,d,{style:{width:c}}),l=v(S);return O(Dt,{key:l,setRef:function(m){return g(S,m)}},r)})}var Pt=function(){function e(){_t(this,e),this.maps=void 0,this.id=0,this.maps=Object.create(null)}return Et(e,[{key:"set",value:function(t,c){this.maps[t]=c,this.id+=1}},{key:"get",value:function(t){return this.maps[t]}}]),e}();function It(e,u,t){var c=F(0),g=H(c,2),n=g[0],s=g[1],v=p(new Map),S=p(new Pt),y=p();function d(){A.cancel(y.current)}function r(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;d();var m=function(){v.current.forEach(function(f,M){if(f&&f.offsetParent){var b=Ht(f),D=b.offsetHeight;S.current.get(M)!==D&&S.current.set(M,b.offsetHeight)}}),s(function(f){return f+1})};a?m():y.current=A(m)}function l(a,m){var h=e(a),f=v.current.get(h);m?(v.current.set(h,m),r()):v.current.delete(h),!f!=!m&&(m?u==null||u(a):t==null||t(a))}return be(function(){return d},[]),[l,r,S.current,n]}var Nt=10;function Ot(e,u,t,c,g,n,s,v){var S=p(),y=F(null),d=H(y,2),r=d[0],l=d[1];return ye(function(){if(r&&r.times<Nt){if(!e.current){l(function(ne){return k({},ne)});return}n();var a=r.targetAlign,m=r.originAlign,h=r.index,f=r.offset,M=e.current.clientHeight,b=!1,D=a,L=null;if(M){for(var Y=a||m,V=0,x=0,G=0,C=Math.min(u.length-1,h),$=0;$<=C;$+=1){var P=g(u[$]);x=V;var ee=t.get(P);G=x+(ee===void 0?c:ee),V=G}for(var w=Y==="top"?f:M-f,W=C;W>=0;W-=1){var te=g(u[W]),re=t.get(te);if(re===void 0){b=!0;break}if(w-=re,w<=0)break}switch(Y){case"top":L=x-f;break;case"bottom":L=G-M+f;break;default:{var Z=e.current.scrollTop,I=Z+M;x<Z?D="top":G>I&&(D="bottom")}}L!==null&&s(L),L!==r.lastTop&&(b=!0)}b&&l(k(k({},r),{},{times:r.times+1,targetAlign:D,lastTop:L}))}},[r,e.current]),function(a){if(a==null){v();return}if(A.cancel(S.current),typeof a=="number")s(a);else if(a&&ke(a)==="object"){var m,h=a.align;"index"in a?m=a.index:m=u.findIndex(function(b){return g(b)===a.key});var f=a.offset,M=f===void 0?0:f;l({times:0,index:m,offset:M,originAlign:h})}}}function kt(e,u,t){var c=e.length,g=u.length,n,s;if(c===0&&g===0)return null;c<g?(n=e,s=u):(n=u,s=e);var v={__EMPTY_ITEM__:!0};function S(m){return m!==void 0?t(m):v}for(var y=null,d=Math.abs(c-g)!==1,r=0;r<s.length;r+=1){var l=S(n[r]),a=S(s[r]);if(l!==a){y=r,d=d||l!==S(s[r+1]);break}}return y===null?null:{index:y,multiple:d}}function Ft(e,u,t){var c=F(e),g=H(c,2),n=g[0],s=g[1],v=F(null),S=H(v,2),y=S[0],d=S[1];return be(function(){var r=kt(n||[],e||[],u);(r==null?void 0:r.index)!==void 0&&(t==null||t(r.index),d(e[r.index])),s(e)},[e]),[y]}var rt=(typeof navigator>"u"?"undefined":ke(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ct=function(e,u){var t=p(!1),c=p(null);function g(){clearTimeout(c.current),t.current=!0,c.current=setTimeout(function(){t.current=!1},50)}var n=p({top:e,bottom:u});return n.current.top=e,n.current.bottom=u,function(s){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=s<0&&n.current.top||s>0&&n.current.bottom;return v&&S?(clearTimeout(c.current),t.current=!1):(!S||t.current)&&g(),!t.current&&S}};function Yt(e,u,t,c,g){var n=p(0),s=p(null),v=p(null),S=p(!1),y=ct(u,t);function d(f,M){A.cancel(s.current),n.current+=M,v.current=M,!y(M)&&(rt||f.preventDefault(),s.current=A(function(){var b=S.current?10:1;g(n.current*b),n.current=0}))}function r(f,M){g(M,!0),rt||f.preventDefault()}var l=p(null),a=p(null);function m(f){if(e){A.cancel(a.current),a.current=A(function(){l.current=null},2);var M=f.deltaX,b=f.deltaY,D=f.shiftKey,L=M,Y=b;(l.current==="sx"||!l.current&&D&&b&&!M)&&(L=b,Y=0,l.current="sx");var V=Math.abs(L),x=Math.abs(Y);l.current===null&&(l.current=c&&V>x?"x":"y"),l.current==="y"?d(f,Y):r(f,L)}}function h(f){e&&(S.current=f.detail===v.current)}return[m,h]}var $t=14/15;function Wt(e,u,t){var c=p(!1),g=p(0),n=p(null),s=p(null),v,S=function(l){if(c.current){var a=Math.ceil(l.touches[0].pageY),m=g.current-a;g.current=a,t(m)&&l.preventDefault(),clearInterval(s.current),s.current=setInterval(function(){m*=$t,(!t(m,!0)||Math.abs(m)<=.1)&&clearInterval(s.current)},16)}},y=function(){c.current=!1,v()},d=function(l){v(),l.touches.length===1&&!c.current&&(c.current=!0,g.current=Math.ceil(l.touches[0].pageY),n.current=l.target,n.current.addEventListener("touchmove",S),n.current.addEventListener("touchend",y))};v=function(){n.current&&(n.current.removeEventListener("touchmove",S),n.current.removeEventListener("touchend",y))},ye(function(){return e&&u.current.addEventListener("touchstart",d),function(){var r;(r=u.current)===null||r===void 0||r.removeEventListener("touchstart",d),v(),clearInterval(s.current)}},[e])}var Xt=20;function nt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=e/u*100;return isNaN(t)&&(t=0),t=Math.max(t,Xt),t=Math.min(t,e/2),Math.floor(t)}function Vt(e,u,t,c){var g=Me(function(){return[new Map,[]]},[e,t.id,c]),n=H(g,2),s=n[0],v=n[1],S=function(d){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,l=s.get(d),a=s.get(r);if(l===void 0||a===void 0)for(var m=e.length,h=v.length;h<m;h+=1){var f,M=e[h],b=u(M);s.set(b,h);var D=(f=t.get(b))!==null&&f!==void 0?f:c;if(v[h]=(v[h-1]||0)+D,b===d&&(l=h),b===r&&(a=h),l!==void 0&&a!==void 0)break}return{top:v[l-1]||0,bottom:v[a]}};return S}var Bt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Kt=[],At={overflowY:"auto",overflowAnchor:"none"};function Gt(e,u){var t=e.prefixCls,c=t===void 0?"rc-virtual-list":t,g=e.className,n=e.height,s=e.itemHeight,v=e.fullHeight,S=v===void 0?!0:v,y=e.style,d=e.data,r=e.children,l=e.itemKey,a=e.virtual,m=e.direction,h=e.scrollWidth,f=e.component,M=f===void 0?"div":f,b=e.onScroll,D=e.onVirtualScroll,L=e.onVisibleChange,Y=e.innerProps,V=e.extraRender,x=e.styles,G=Lt(e,Bt),C=!!(a!==!1&&n&&s),$=C&&d&&(s*d.length>n||!!h),P=m==="rtl",ee=ze(c,N({},"".concat(c,"-rtl"),P),g),w=d||Kt,W=p(),te=p(),re=F(0),Z=H(re,2),I=Z[0],ne=Z[1],ae=F(0),ue=H(ae,2),ie=ue[0],B=ue[1],Ee=F(!1),ce=H(Ee,2),fe=ce[0],ve=ce[1],de=function(){ve(!0)},U=function(){ve(!1)},z=ot(function(i){return typeof l=="function"?l(i):i==null?void 0:i[l]},[l]),K={getKey:z};function T(i){ne(function(o){var R;typeof i=="function"?R=i(o):R=i;var _=gt(R);return W.current.scrollTop=_,_})}var E=p({start:0,end:w.length}),j=p(),xe=Ft(w,z),he=H(xe,1),ge=he[0];j.current=ge;var _e=It(z,null,null),se=H(_e,4),Le=se[0],Se=se[1],oe=se[2],we=se[3],le=Me(function(){if(!C)return{scrollHeight:void 0,start:0,end:w.length-1,offset:void 0};if(!$){var i;return{scrollHeight:((i=te.current)===null||i===void 0?void 0:i.offsetHeight)||0,start:0,end:w.length-1,offset:void 0}}for(var o=0,R,_,Q,xt=w.length,pe=0;pe<xt;pe+=1){var wt=w[pe],zt=z(wt),qe=oe.get(zt),Oe=o+(qe===void 0?s:qe);Oe>=I&&R===void 0&&(R=pe,_=o),Oe>I+n&&Q===void 0&&(Q=pe),o=Oe}return R===void 0&&(R=0,_=0,Q=Math.ceil(n/s)),Q===void 0&&(Q=w.length-1),Q=Math.min(Q+1,w.length-1),{scrollHeight:o,start:R,end:Q,offset:_}},[$,C,I,w,we,n]),q=le.scrollHeight,X=le.start,me=le.end,Ye=le.offset;E.current.start=X,E.current.end=me;var st=F({width:0,height:n}),$e=H(st,2),J=$e[0],ft=$e[1],vt=function(o){ft({width:o.width||o.offsetWidth,height:o.height||o.offsetHeight})},We=p(),Xe=p(),dt=Me(function(){return nt(J.width,h)},[J.width,h]),ht=Me(function(){return nt(J.height,q)},[J.height,q]),Te=q-n,He=p(Te);He.current=Te;function gt(i){var o=i;return Number.isNaN(He.current)||(o=Math.min(o,He.current)),o=Math.max(o,0),o}var Ve=I<=0,Be=I>=Te,St=ct(Ve,Be),De=function(){return{x:P?-ie:ie,y:I}},Ce=p(De()),Pe=Qe(function(){if(D){var i=De();(Ce.current.x!==i.x||Ce.current.y!==i.y)&&(D(i),Ce.current=i)}});function Ke(i,o){var R=i;o?(Je(function(){B(R)}),Pe()):T(R)}function mt(i){var o=i.currentTarget.scrollTop;o!==I&&T(o),b==null||b(i),Pe()}var Ie=function(o){var R=o,_=h-J.width;return R=Math.max(R,0),R=Math.min(R,_),R},Rt=Qe(function(i,o){o?(Je(function(){B(function(R){var _=R+(P?-i:i);return Ie(_)})}),Pe()):T(function(R){var _=R+i;return _})}),pt=Yt(C,Ve,Be,!!h,Rt),Ae=H(pt,2),Ne=Ae[0],Ge=Ae[1];Wt(C,W,function(i,o){return St(i,o)?!1:(Ne({preventDefault:function(){},deltaY:i}),!0)}),ye(function(){function i(R){C&&R.preventDefault()}var o=W.current;return o.addEventListener("wheel",Ne),o.addEventListener("DOMMouseScroll",Ge),o.addEventListener("MozMousePixelScroll",i),function(){o.removeEventListener("wheel",Ne),o.removeEventListener("DOMMouseScroll",Ge),o.removeEventListener("MozMousePixelScroll",i)}},[C]),ye(function(){h&&B(function(i){return Ie(i)})},[J.width,h]);var Ue=function(){var o,R;(o=We.current)===null||o===void 0||o.delayHidden(),(R=Xe.current)===null||R===void 0||R.delayHidden()},je=Ot(W,w,oe,s,z,function(){return Se(!0)},T,Ue);it(u,function(){return{getScrollInfo:De,scrollTo:function(o){function R(_){return _&&ke(_)==="object"&&("left"in _||"top"in _)}R(o)?(o.left!==void 0&&B(Ie(o.left)),je(o.top)):je(o)}}}),ye(function(){if(L){var i=w.slice(X,me+1);L(i,w)}},[X,me,w]);var Mt=Vt(w,z,oe,s),bt=V==null?void 0:V({start:X,end:me,virtual:$,offsetX:ie,offsetY:Ye,rtl:P,getSize:Mt}),yt=Ct(w,X,me,h,Le,r,K),Re=null;n&&(Re=k(N({},S?"height":"maxHeight",n),At),C&&(Re.overflowY="hidden",h&&(Re.overflowX="hidden"),fe&&(Re.pointerEvents="none")));var Ze={};return P&&(Ze.dir="rtl"),O("div",at({style:k(k({},y),{},{position:"relative"}),className:ee},Ze,G),O(lt,{onResize:vt},O(M,{className:"".concat(c,"-holder"),style:Re,ref:W,onScroll:mt,onMouseEnter:Ue},O(ut,{prefixCls:c,height:q,offsetX:ie,offsetY:Ye,scrollWidth:h,onInnerResize:Se,ref:te,innerProps:Y,rtl:P,extra:bt},yt))),$&&q>n&&O(tt,{ref:We,prefixCls:c,scrollOffset:I,scrollRange:q,rtl:P,onScroll:Ke,onStartMove:de,onStopMove:U,spinSize:ht,containerSize:J.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),$&&h&&O(tt,{ref:Xe,prefixCls:c,scrollOffset:ie,scrollRange:h,rtl:P,onScroll:Ke,onStartMove:de,onStopMove:U,spinSize:dt,containerSize:J.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Ut=Fe(Gt);Ut.displayName="List";export{Ut as L};
